# Boss直聘自动投递工具 - 需求文档

## 一、项目背景

作为一名拥有13年经验的软件测试人员，在求职过程中发现 Boss直聘 缺少一键投递功能，需要手动逐个点击沟通，效率低下。本项目旨在开发一个自动化工具，帮助每天高效投递简历，减少重复劳动。

---

## 二、核心功能

### 2.1 职位搜索与筛选

**实现方式：URL 参数直接访问**

通过构造 URL 参数实现筛选，比 UI 模拟点击更快更稳定：

```
https://www.zhipin.com/web/geek/jobs?query=QA&city=101020100&salary=406&experience=106&degree=203
```

**基础筛选条件（通过配置文件设置）：**

- 关键词搜索（支持多关键词，如 "QA"、"测试开发"、"功能测试"、"自动化测试"）
- 城市筛选（支持多城市）
- 薪资范围
- 学历要求
- 工作经验要求

**智能过滤规则：**
- 排除已投递/已沟通的职位（基于本地记录）
- 排除黑名单公司
- 排除已读不回的 HR（历史标记）
- 优先投递 N 天内发布的新职位（可配置，默认3天）

### 2.2 自动投递

**投递流程：**
1. 打开职位详情页
2. 模拟点击"立即沟通"按钮
3. 发送打招呼消息
4. 记录投递结果

**打招呼配置：**
- 支持多套话术模板（配置文件维护）
- 随机轮换避免重复
- 支持变量替换（如 `{职位名称}`、`{公司名称}`）

**风控策略：**
- 单次运行投递数量上限（可配置，建议 20-30）
- 投递间隔时间（随机延迟，模拟人工操作）
- 每日投递总量限制

### 2.3 定时任务

**执行策略：**
- 设定每日执行时间（支持多个时间点，如 9:00、14:00、19:00）
- 工作日/周末不同策略（如周末减少投递量或暂停）
- 支持手动触发

### 2.4 数据记录与去重

**记录内容：**
| 字段 | 说明 |
|------|------|
| job_id | 职位唯一标识 |
| company | 公司名称 |
| position | 职位名称 |
| hr_name | HR 名称 |
| apply_time | 投递时间 |
| status | 状态（已投递/已读/已回复） |

**数据用途：**
- 自动去重（下次运行跳过已投递）
- 投递统计
- HR 响应率追踪

---

## 三、二次筛选策略

### 3.1 问题场景

Boss 搜索结果不准的常见情况：

| 问题类型 | 具体表现 |
|----------|----------|
| 职位不匹配 | 搜"QA"出现"销售"（JD 里提了一句质量相关的词） |
| 薪资虚标 | 标 15-30K，实际面议或要求资深才能拿到上限 |
| 地点不符 | 标"上海"但实际工作地在其他城市 |
| 僵尸职位 | HR 长期不活跃、已读不回 |
| 公司不符 | 规模/融资阶段不符合预期 |

### 3.2 解决方案

**JD 关键词校验：**
- 白名单：必须包含的关键词（如"测试"、"自动化"）
- 黑名单：必须排除的关键词（如"销售"、"电话"、"客服"）

**公司黑名单库：**
- 手动维护：面试体验差、口碑不好的公司
- 自动标记：多次投递无响应的公司

**HR 活跃度检测：**
- 优先选择最近活跃的 HR
- 标记历史已读不回的 HR，降低优先级

**职位新鲜度：**
- 按发布时间排序
- 优先投递 3 天内发布的新职位

---

## 四、配置设计

### 4.1 Cookie 存储（单独文件）

Cookie 较长且包含特殊字符，单独存放在 `cookie.txt` 文件中：

```text
# cookie.txt
# 直接粘贴从浏览器复制的 cookie 字符串（一行，无需引号）
lastCity=101020100; ab_guid=xxx; __zp_stoken__=xxx; ...
```

**获取方式：**
1. 浏览器登录 Boss直聘
2. F12 打开开发者工具 → Application → Cookies
3. 复制所有 cookie 拼接成 `key=value; key2=value2` 格式
4. 粘贴到 `cookie.txt`

### 4.2 URL 参数映射表

Boss直聘 URL 使用编码参数，配置文件使用中文便于阅读，程序自动转换：

```yaml
# url_params.yaml（参数映射表，一般不需要修改）

city:
  全国: "100010000"
  北京: "101010100"
  上海: "101020100"
  广州: "101280100"
  深圳: "101280600"
  杭州: "101210100"
  成都: "101270100"
  南京: "101190100"
  武汉: "101200100"
  西安: "101110100"
  苏州: "101190400"

salary:
  "20-50K": "406"
  "50K以上": "407"

experience:
  "不限": "101"
  "3-5年": "105"
  "5-10年": "106"
  "10年以上": "107"

degree:
  "本科": "203"


### 4.3 配置文件结构

```yaml
# config.yaml

# 搜索条件（使用中文，程序自动转换为 URL 参数）
search:
  keywords:
    - "QA"
    - "测试开发"
    - "自动化测试"
    - "测试工程师"
  city: "上海"              # 对应 url_params.yaml 中的 city
  salary: "20-50K"          # 对应 url_params.yaml 中的 salary
  experience: "5-10年"      # 对应 url_params.yaml 中的 experience
  degree: "本科"            # 对应 url_params.yaml 中的 degree

# JD 过滤规则
filter:
  must_include: ["测试"]  # JD 必须包含
  must_exclude: ["销售", "电销", "客服", "实习"]  # JD 必须排除
  company_blacklist: []  # 公司黑名单
  company_keyword_blacklist: ["外包", "人力资源"]  # 公司名包含这些词则跳过
  max_job_age_days: 7  # 只投递 N 天内发布的职位

# 投递设置
apply:
  daily_limit: 50      # 每日投递上限
  batch_limit: 20      # 单次运行投递上限
  interval_min: 30     # 投递间隔最小秒数
  interval_max: 60     # 投递间隔最大秒数

# 打招呼模板（随机选择）
greetings:
  - "您好，我对贵司的{position}很感兴趣，有13年测试经验，擅长自动化测试框架搭建和团队管理，期待与您进一步沟通。"
  - "您好，看到贵司在招{position}，我的经验和要求比较匹配，方便聊聊吗？"
  - "您好，{position}这个岗位很适合我，我有丰富的测试经验，希望能有机会详聊。"

# 定时任务
schedule:
  enabled: true
  times:
    - "09:00"
    - "14:00"
    - "15:00"
    - "17:00"
  workdays_only: false  # 是否仅工作日执行
  weekend_limit: 10     # 周末投递上限（如果 workdays_only 为 false）
```

### 4.4 数据存储

```text
data/
├── applied_jobs.json      # 已投递职位记录
├── blacklist.json         # 黑名单数据
├── hr_records.json        # HR 响应记录
└── daily_stats.json       # 每日统计
```

---

## 五、技术实现

### 5.1 技术栈

- **语言**: Python 3.10+
- **自动化框架**: Playwright (Python)
- **数据存储**: JSON 文件（轻量级，便于查看和编辑）
- **定时任务**: APScheduler（轻量级 Python 定时任务库）
- **配置管理**: YAML 配置文件（PyYAML）
- **日志**: logging 模块 + 文件输出

### 5.2 依赖库

```txt
playwright>=1.40.0
apscheduler>=3.10.0
pyyaml>=6.0
```

### 5.3 关键实现点

- Cookie 通过配置文件读取，避免频繁登录
- 所有筛选条件、投递参数均通过配置文件管理，不硬编码
- 随机延迟模拟人工操作，降低风控风险
- 完善的错误处理和重试机制

---

## 六、项目结构（建议）

```text
boss_rob/
├── src/
│   ├── __init__.py
│   ├── main.py            # 主入口
│   ├── browser.py         # 浏览器/Playwright 初始化
│   ├── search.py          # 职位搜索逻辑
│   ├── filter.py          # 职位过滤逻辑
│   ├── apply.py           # 投递逻辑
│   ├── scheduler.py       # 定时任务（APScheduler）
│   └── utils/
│       ├── __init__.py
│       ├── config.py      # 配置读取
│       ├── storage.py     # 数据存储
│       └── logger.py      # 日志工具
├── data/                  # 运行数据
├── logs/                  # 日志文件
├── config.yaml            # 用户配置文件
├── url_params.yaml        # URL 参数映射表
├── cookie.txt             # Cookie（从浏览器复制）
├── requirements.txt       # Python 依赖
└── README.md
```

---

## 七、后续扩展（可选）

- [ ] 简历与 JD 匹配度评分
- [ ] 投递结果通知（微信/邮件）
- [ ] Web 管理界面
- [ ] 数据分析看板（投递量、回复率等）
- [ ] 多账号支持
